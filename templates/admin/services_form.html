{% extends "base.html" %}
{% block title %}{% if service %}Xizmatni Tahrirlash{% else %}Yangi Xizmat{% endif %} - SmartBot.uz{% endblock %}

{% block content %}
<div class="container py-4" style="max-width: 800px;">
  <!-- Header -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h2 class="text-white mb-1">
            <i class="fas fa-{% if service %}edit{% else %}plus{% endif %} me-2 text-primary"></i>
            {% if service %}Xizmatni Tahrirlash{% else %}Yangi Xizmat Qo'shish{% endif %}
          </h2>
        </div>
        <a href="{{ url_for('admin_services') }}" class="btn btn-outline-light">
          <i class="fas fa-arrow-left me-1"></i>Orqaga
        </a>
      </div>
    </div>
  </div>

  <!-- Flash Messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, msg in messages %}
        <div class="alert alert-{{ 'danger' if category=='error' else 'success' }} alert-dismissible fade show" role="alert">
          {{ msg }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <!-- Form -->
  <div class="row">
    <div class="col-12">
      <div class="card" style="background-color: rgba(52, 58, 64, 0.9); border: 1px solid rgba(255,255,255,0.1);">
        <div class="card-body">
          <form method="POST">
            <div class="row g-3">
              <div class="col-md-8">
                <label for="title" class="form-label text-white">Xizmat nomi *</label>
                <input type="text" 
                       id="title"
                       name="title" 
                       class="form-control bg-dark border-0 text-white" 
                       placeholder="Masalan: Telegram Bot Yaratish"
                       value="{% if service %}{{ service.title }}{% endif %}"
                       required>
              </div>
              
              <div class="col-md-4">
                <label for="price" class="form-label text-white">Narx *</label>
                <input type="text" 
                       id="price"
                       name="price" 
                       class="form-control bg-dark border-0 text-white" 
                       placeholder="500,000 so'mdan"
                       value="{% if service %}{{ service.price }}{% endif %}"
                       required>
              </div>
              
              <div class="col-12">
                <label for="description" class="form-label text-white">Tavsif *</label>
                <textarea id="description"
                          name="description" 
                          class="form-control bg-dark border-0 text-white" 
                          rows="4" 
                          placeholder="Xizmat haqida batafsil ma'lumot yozing..."
                          required>{% if service %}{{ service.description }}{% endif %}</textarea>
              </div>
              
              <div class="col-12">
                <label for="icon" class="form-label text-white">Icon (Font Awesome class) *</label>
                <input type="text" 
                       id="icon"
                       name="icon" 
                       class="form-control bg-dark border-0 text-white" 
                       placeholder="fas fa-robot"
                       value="{% if service %}{{ service.icon }}{% endif %}"
                       required>
                <small class="text-white-50">
                  Font Awesome icon classini kiriting. Namuna: fas fa-robot, fas fa-comments, fas fa-cogs
                </small>
              </div>
              
              <div class="col-12">
                <hr class="my-4" style="border-color: #495057;">
                <div class="d-flex gap-2">
                  <button type="submit" class="btn btn-success">
                    <i class="fas fa-save me-1"></i>
                    {% if service %}Yangilash{% else %}Qo'shish{% endif %}
                  </button>
                  <a href="{{ url_for('admin_services') }}" class="btn btn-secondary">
                    <i class="fas fa-times me-1"></i>Bekor qilish
                  </a>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Icon Preview -->
  {% if service %}
  <div class="row mt-4">
    <div class="col-12">
      <div class="card" style="background-color: rgba(52, 58, 64, 0.9); border: 1px solid rgba(255,255,255,0.1);">
        <div class="card-body">
          <h6 class="text-white mb-3">Icon Preview:</h6>
          <div class="text-center p-3">
            <i class="{{ service.icon }} fa-3x text-primary"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>

<style>
.form-control:focus {
  background-color: #495057 !important;
  border-color: #007bff !important;
  color: white !important;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25) !important;
}

.form-control::placeholder {
  color: #adb5bd !important;
}
</style>
{% endblock %}